<!DOCTYPE html>
<html>
    
<head>
    <title>Custom Receipt Generator</title>
<link rel="stylesheet" href="style.css">
    <style>
        body { font-family: Arial;  }
        .form-box { width: 30%;  
          
        }
        .adj{
           width:0px;
           height: 0px;
           overflow-y: scroll;
           overflow-x: scroll;
           margin-left: 600px;
          
            
        }
        .receipt-box {
            width: 2000px;
            height: 1414px;
            background-image: url('receipt.png'); /* Your custom design */
            background-size: contain;
            position: relative;
            display: none; /* Hide the receipt preview */
        }
        .field {
            position: absolute;
            font-size: 60px;
            font-weight: bold;
            color:rgb(255, 255, 255);
            white-space: nowrap;
            background-color: rgba(255, 255, 255, 0);
        }
        /* Adjust these positions according to your design */
        #nameField { top: 850px; left: 545px;}
        #amountField { top: 1025px; left: 818px; }
        #dateField { top: 1265px; left: 616px; }
        #addressField { top: 1145px; left: 611px; width: 300px; }
        button { margin-top: 10px; padding: 8px 15px; }
        #receiverField{top: 1320px; left: 1050px;}
    </style>
</head>
<body>

    <div class="form-box">
        <h2>Receipt Generator NSA SAHOO</h2>
        <label>Name</label><br>
        <input id="name" /><br><br>
        <label>Amount</label><br>
        <input id="amount" /><br><br>
        <label>Date</label><br>
        <input type="date" id="date" /><br><br>
        <label>Address</label><br>
        <input type="text" id="address"></input><br> <br>
        <label>Payment Receiver Name</label><br>
        <input type="text" id="receiver"></input>
        <br>
        <button onclick="downloadReceipt()">Download Receipt</button>
        <button onclick="resetForm()">
    Reset Form
</button>


        
    </div>
<div class="adj">
    <div class="receipt-box" id="receiptPreview">
        <div id="nameField" class="field"></div>
        <div id="amountField" class="field"></div>
        <div id="dateField" class="field"></div>
        <div id="addressField" class="field"></div>
        <div id="receiverField" class="field" ></div>
    </div>
</div>

<div id="historyBox" class="form-box" style="background: #232526; color: #fff; margin-top: 18px;">
    <h3>Entry History</h3>
    <ul id="historyList" style="list-style: none; padding-left: 0;"></ul>
</div>

    
    <script>
        let historyEntries = [];

        function renderHistory() {
    const historyList = document.getElementById("historyList");
    historyList.innerHTML = "";
    historyEntries.forEach((entry, idx) => {
        historyList.innerHTML += `<li>
            <span style="color:#39FF14;font-weight:bold;">${entry.name}</span> — 
            <span style="color:#FF1493;">₹${entry.amount}</span> —
            <span style="color:#FFD700;">${entry.date}</span> —
            <span>${entry.address}</span> —
            <span style="color:#FF69B4;">${entry.receiver}</span>
        </li><hr style="border-color:#FFD700;">`;
    });
}

function renderHistory() {
    const historyList = document.getElementById("historyList");
    historyList.innerHTML = "";
    historyEntries.forEach((entry, idx) => {
        historyList.innerHTML += `<li style="display:flex;align-items:center;justify-content:space-between;">
            <span>
                <span style="color:#39FF14;font-weight:bold;">${entry.name}</span> — 
                <span style="color:#FF1493;">₹${entry.amount}</span> —
                <span style="color:#FFD700;">${entry.date}</span> —
                <span>${entry.address}</span> —
                <span style="color:#FF69B4;">${entry.receiver}</span>
            </span>
            <button onclick="deleteHistoryEntry(${idx})" style="background:#FF4343; color:#FFF; border:none; border-radius:8px; padding:3px 10px; margin-left:15px; cursor:pointer;">
                Delete
            </button>
        </li>
        <hr style="border-color:#FFD700;">`;
    });
}
function deleteHistoryEntry(index) {
    historyEntries.splice(index, 1);
    renderHistory();
}

function resetForm() {
    document.getElementById("name").value = "";
    document.getElementById("amount").value = "";
    document.getElementById("date").value = "";
    document.getElementById("address").value = "";
    document.getElementById("receiver").value = "";

    // Optionally, clear the preview as well:
    document.getElementById("nameField").innerText = "";
    document.getElementById("amountField").innerText = "";
    document.getElementById("dateField").innerText = "";
    document.getElementById("addressField").innerText = "";
    document.getElementById("receiverField").innerText = "";
}



        function downloadReceipt() {
            // Fill the receipt fields in the background
            document.getElementById("nameField").innerText = document.getElementById("name").value;
            document.getElementById("amountField").innerText = "₹ " + document.getElementById("amount").value;
            document.getElementById("amountField").style.color="green";
            document.getElementById("amountField").style.fontSize="70px";
            document.getElementById("dateField").innerText = document.getElementById("date").value;
            document.getElementById("addressField").innerText = document.getElementById("address").value;
            document.getElementById("receiverField").innerText = document.getElementById("receiver").value;
            document.getElementById("receiverField").style.color="red";

            // Add to history
            let entry = {
                name: document.getElementById("name").value,
                amount: document.getElementById("amount").value,
                date: document.getElementById("date").value,
                address: document.getElementById("address").value,
                receiver: document.getElementById("receiver").value
            };
            historyEntries.unshift(entry);
            renderHistory();

            // Generate and download the receipt
            html2canvas(document.getElementById("receiptPreview")).then(canvas => {
                let link = document.createElement("a");
                link.download = "Receipt.png";
                link.href = canvas.toDataURL();
                link.click();
            });
        }
    </script>

    <!-- CDN for converting receipt box to image -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="main.js" ></script>
</body>
</html>